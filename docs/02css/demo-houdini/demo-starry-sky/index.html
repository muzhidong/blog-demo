<!-- https://www.rrfed.com/html/houdini/starry-sky/ -->
<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>CSS Houdini 绘制星空</title>
  <style>
    body {
      margin: 0;
      color: #fff;
      font-size: 24px;
      background-color: #000;
    }

    body::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      --star-density: 0.8;
      --starry-sky-seed: 1;
      --star-opacity: 1;
      background-image: paint(starry-sky);
      /* background-image: paint(test); */
      /* 忽明忽暗 */
      animation: shine 1s linear alternate infinite;
    }

    @keyframes shine {
      from {
        opacity: 1;
      }
      to {
        opacity: 0.6;
      }
    }
  </style>
</head>
<body>
  <script>
    const blobURL = URL.createObjectURL(new Blob(['(',
      function(){
        class Test {
          paint (ctx, paintSize, properties) {
            ctx.fillStyle = 'red';
            ctx.fillRect(0, 0, paintSize.width, paintSize.height);
          }
        }
        registerPaint('test', Test);
      }.toString(),')()' ], { 
        type: 'application/javascript' 
      }) 
    );
    CSS.paintWorklet.addModule(blobURL);
    

    if (!CSS in window || !CSS.paintWorklet) {
      document.write('Oh no, your browser does not support CSS Houdini，please use Chrome 65+');
    } else {
      CSS.paintWorklet.addModule('starry-sky.js');
    }
  </script>
</body>
